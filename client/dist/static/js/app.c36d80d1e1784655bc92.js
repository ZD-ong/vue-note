webpackJsonp([1],{"+BTi":function(t,e){},"7psX":function(t,e){},Dzb6:function(t,e){},EPSP:function(t,e){},JgxW:function(t,e){},LL4n:function(t,e){},LnGo:function(t,e){},NHnr:function(t,e,o){"use strict";function n(t){o("R0aq")}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"get",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new O.a(function(n,i){var s={url:t,method:e,validateStatus:function(t){return t>=200&&t<300||400===t}};"get"===e.toLowerCase()?s.params=o:s.data=o,j()(s).then(function(t){200===t.status?n(t.data):(p.a.error(t.data.msg||"参数错误"),i(t.data))}).catch(function(t){p.a.error("网络异常"),i({msg:"网络异常"})})})}function s(t){o("7psX")}function r(t){o("P4yj")}function a(t){var e="object"===(void 0===t?"undefined":ut()(t))?t:new Date(t),o=e.getTime(),n=Date.now(),i="";switch(!0){case n-o<6e4:i="刚刚";break;case n-o<36e5:i=Math.floor((n-o)/6e4)+"分钟前";break;case n-o<864e5:i=Math.floor((n-o)/36e5)+"小时前";break;case n-o<2592e6:i=Math.floor((n-o)/864e5)+"天前";break;default:i=e.toLocaleDateString()}return i}function c(t){o("LnGo")}function l(t){o("aMFU")}function u(t){o("e8T8")}function d(t){o("wsAX")}function f(t){o("EPSP")}function v(t){o("JgxW")}Object.defineProperty(e,"__esModule",{value:!0});var h=(o("cwe7"),o("2X9z")),p=o.n(h),b=(o("LL4n"),o("BrEC")),g=o.n(b),m=(o("U/ZW"),o("+nRk")),k=o.n(m),_=(o("Dzb6"),o("o6kb")),N=o.n(_),w=(o("Yq4J"),o("+BTi"),o("qubY")),C=o.n(w),I=o("7+uW"),E=o("Dd8w"),T=o.n(E),D=o("NYxO"),V={computed:T()({},Object(D.e)(["user"]),Object(D.c)(["slug"])),methods:T()({},Object(D.d)(["setUser","unsetUser"]))},A=function(){var t=this,e=t.$createElement;return(t._self._c||e)("span",{attrs:{title:t.user.username}},[t._v(t._s(t.slug))])},$=[],y={render:A,staticRenderFns:$},R=y,U=o("VU/8"),x=n,L=U(V,R,!1,x,"data-v-39dad3ff",null),P=L.exports,F=o("//Fk"),O=o.n(F),M=o("mtWM"),j=o.n(M),S=o("pR7/"),G=o.n(S);j.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded",j.a.defaults.baseURL=G.a.host;var B={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET:"/auth"},q={register:function(t){var e=t.username,o=t.password;return new O.a(function(t,n){i(B.REGISTER,"POST",{username:e,password:o}).then(function(e){t(e.data)}).catch(function(t){n(t)})})},login:function(t){var e=t.username,o=t.password;return new O.a(function(t,n){i(B.LOGIN,"POST",{username:e,password:o}).then(function(e){t(e.data)}).catch(function(t){n(t)})})},logout:function(){return new O.a(function(t,e){i(B.LOGOUT).then(function(e){t(e.data)}).catch(function(t){e(t)})})},getUser:function(){return new O.a(function(t,e){i(B.GET).then(function(e){t(e)}).catch(function(t){e(t)})})}},H={components:{avatar:P},computed:T()({},Object(D.e)(["user"]),Object(D.c)(["slug"])),methods:T()({},Object(D.d)(["setUser","unsetUser"]),{onLogout:function(){var t=this;q.logout().then(function(){t.$message.success("注销成功"),t.unsetUser(),t.$router.replace("/login")})}}),created:function(){var t=this;q.getUser().then(function(e){e.isLogin?(t.setUser({user:e.data}),t.$router.replace("/notebooks")):t.$router.replace("/login")})}},W=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"sidebar"}},[o("avatar"),t._v(" "),o("div",{staticClass:"icons"},[o("router-link",{attrs:{to:"/notebook/",title:"笔记"}},[o("i",{staticClass:"iconfont icon-note"})]),t._v(" "),o("router-link",{attrs:{to:"/notebooks",title:"笔记本"}},[o("i",{staticClass:"iconfont icon-notebook"})]),t._v(" "),o("router-link",{attrs:{to:"/trash",title:"回收站"}},[o("i",{staticClass:"iconfont icon-trash"})])],1),t._v(" "),o("div",{staticClass:"logout",on:{click:t.onLogout}},[o("i",{staticClass:"iconfont icon-logout"})])],1)},z=[],J={render:W,staticRenderFns:z},X=J,Y=o("VU/8"),Z=s,K=Y(H,X,!1,Z,"data-v-61c8334b",null),Q=K.exports,tt={name:"app",components:{sidebar:Q}},et=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"app"}},[o("sidebar"),t._v(" "),o("router-view")],1)},ot=[],nt={render:et,staticRenderFns:ot},it=nt,st=o("VU/8"),rt=r,at=st(tt,it,!1,rt,null,null),ct=at.exports,lt=o("pFYg"),ut=o.n(lt),dt={GET:"/notes/from/:notebookId",ADD:"/notes/to/:notebookId",UPDATE:"/notes/:noteId",DELETE:"/notes/:noteId"},ft={getAll:function(t){var e=t.notebookId;return new O.a(function(t,o){i(dt.GET.replace(":notebookId",e)).then(function(e){var o=e.data.map(function(t){return t.createdAtFriendly=a(t.createdAt),t.updatedAtFriendly=a(t.updatedAt),t}).sort(function(t,e){return t.updatedAt<e.updatedAt});t(o)}).catch(function(t){o(t)})})},updateNote:function(t,e){var o=e.title,n=e.content;return console.log(arguments),new O.a(function(e,s){i(dt.UPDATE.replace(":noteId",t),"PATCH",{title:o,content:n}).then(function(t){e(t)}).catch(function(t){s(t)})})},deleteNote:function(t){return new O.a(function(e,o){i(dt.DELETE.replace(":noteId",t),"DELETE").then(function(t){e(t)}).catch(function(t){o(t)})})},addNote:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{title:"",content:""},o=e.title,n=void 0===o?"":o,s=e.content,r=void 0===s?"":s;return new O.a(function(e,o){i(dt.ADD.replace(":notebookId",t),"POST",{title:n,content:r}).then(function(t){t.data.createdAtFriendly=a(t.data.createdAt),t.data.updatedAtFriendly=a(t.data.updatedAt),e(t.data)}).catch(function(t){o(t)})})},transforNote:function(t){return new O.a(function(t,e){})}},vt={GET:"/notebooks",ADD:"/notebooks",UPDATE:"/notebooks/:id",DELETE:"/notebooks/:id"},ht={getAll:function(){return new O.a(function(t,e){i(vt.GET).then(function(e){e.data=e.data.map(function(t){return t.createdAtFriendly=a(t.createdAt),t.updatedAtFriendly=a(t.updatedAt),t}).sort(function(t,e){return t.createdAt<e.createdAt}),t(e.data)}).catch(function(t){e(t)})})},updateNotebook:function(t,e){var o=e.title;return new O.a(function(e,n){i(vt.UPDATE.replace(":id",t),"patch",{title:o}).then(function(t){e()}).catch(function(t){n(t)})})},deleteNotebook:function(t){return new O.a(function(e,o){i(vt.DELETE.replace(":id",t),"delete").then(function(t){e()}).catch(function(t){o(t)})})},addNotebook:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:""},e=t.title,o=void 0===e?"":e;return new O.a(function(t,e){i(vt.ADD,"post",{title:o}).then(function(e){t(e.data)}).catch(function(t){e(t)})})}},pt={GET:"/notes/trash",REVERT:"/notes/:noteId/revert",DELETE:"/notes/:noteId/confirm"},bt={getAll:function(){return new O.a(function(t,e){i(pt.GET).then(function(e){var o=e.data.map(function(t){return t.createdAtFriendly=a(t.createdAt),t.updatedAtFriendly=a(t.updatedAt),t}).sort(function(t,e){return t.updatedAt<e.updatedAt});t(o)}).catch(function(t){e(t)})})},deleteNote:function(t){return new O.a(function(e,o){i(pt.DELETE.replace(":noteId",t),"DELETE").then(function(t){e(t)}).catch(function(t){o(t)})})},revertNote:function(t){return new O.a(function(e,o){i(pt.REVERT.replace(":noteId",t),"PATCH").then(function(t){e(t.data)}).catch(function(t){o(t)})})}};I.default.use(D.a);var gt=new D.a.Store({state:{notebooks:[],notes:[],trashNotes:[],curNotebook:{title:""},isCurNotebookInit:!1,curNote:{title:"",content:""},user:{username:""}},getters:{slug:function(t){return t.user.username[0]||""}},mutations:{getNotebooks:function(t,e){t.notebooks=e.notebooks,t.isCurNotebookInit=!0},addNotebook:function(t,e){t.notebooks.unshift(e.notebook)},updateNotebook:function(t,e){t.notebooks.find(function(t){return t.id==e.notebookId}).title=e.title},deleteNotebook:function(t,e){t.notebooks=t.notebooks.filter(function(t){return t.id!=e.notebookId})},setCurrentBook:function(t,e){if(e.notebookId){var o=t.notebooks.find(function(t){return t.id==e.notebookId});t.curNotebook=o,t.isCurNotebookInit=!0}else t.notebooks.length>0?t.curNotebook=t.notebooks[0]:t.curNotebook={title:""}},getNotes:function(t,e){t.notes=e.notes},addNote:function(t,e){t.notes.unshift(e.note)},updateNote:function(t,e){var o=t.notes.find(function(t){return t.id==e.noteId});o.title=e.title,o.content=e.content},deleteNote:function(t,e){t.notes=t.notes.filter(function(t){return t.id!=e.noteId})},setCurrentNote:function(t,e){if(e.noteId){var o=t.notes.find(function(t){return t.id==e.noteId});t.curNote=o}else t.notes.length>0?t.curNote=t.notes[0]:t.curNote={title:"",content:""}},getTrashNotes:function(t,e){t.trashNotes=e.notes},deleteTrashNote:function(t,e){t.trashNotes=t.trashNotes.filter(function(t){return t.id!=e.noteId})},revertTrashNote:function(t,e){if(e.notebookId===t.curNotebook.id){var o=t.trashNotes.filter(function(t){return t.id!=e.noteId});t.notes.unshift(o)}console.log("filter..."),console.log(e),t.trashNotes=t.trashNotes.filter(function(t){return t.id!=e.noteId})},setUser:function(t,e){t.user=e.user},unsetUser:function(t,e){t.user={username:""}}},actions:{getNotebooks:function(t){var e=t.commit,o=t.state;return o.isCurNotebookInit?new O.a(function(t,e){t(o.notebooks)}):ht.getAll().then(function(t){e("getNotebooks",{notebooks:t})})},addNotebook:function(t,e){var o=t.commit;ht.addNotebook({title:e.title}).then(function(t){o("addNotebook",{notebook:t})})},updateNotebook:function(t,e){var o=t.commit;ht.updateNotebook(e.notebookId,{title:e.title}).then(function(){o("updateNotebook",{notebookId:e.notebookId,title:e.title})})},deleteNotebook:function(t,e){var o=t.commit;console.log(e.notebookId),ht.deleteNotebook(e.notebookId).then(function(){o("deleteNotebook",{notebookId:e.notebookId})})},getNotes:function(t,e){var o=t.commit;t.state;return ft.getAll({notebookId:e.notebookId}).then(function(t){o("getNotes",{notes:t})})},addNote:function(t,e){var o=t.commit;return console.log("addNote Action"),ft.addNote(e.notebookId,{title:e.title,content:e.content}).then(function(t){o("addNote",{note:t}),o("setCurrentNote",{noteId:t.id})})},updateNote:function(t,e){t.commit;console.log(e),ft.updateNote(e.noteId,{title:e.title,content:e.content})},deleteNote:function(t,e){var o=t.commit;console.log(e.noteId),ft.deleteNote(e.noteId).then(function(){o("deleteNote",{noteId:e.noteId})})},getTrashNotes:function(t,e){var o=t.commit;t.state;return bt.getAll().then(function(t){o("getTrashNotes",{notes:t})})},deleteTrashNote:function(t,e){var o=t.commit;t.state;return bt.deleteNote(e.noteId).then(function(){o("deleteTrashNote",{noteId:e.noteId})})},revertTrashNote:function(t,e){var o=t.commit;t.state;return bt.revertNote(e.note.id).then(function(){o("revertTrashNote",{noteId:e.note.id,notebookId:e.note.notebookId})})}}}),mt=o("/ocq"),kt={data:function(){return{form:{title:"",id:"",errorMsg:""},dialogCreateVisible:!1,dialogEditVisible:!1,dialogDeleteVisible:!1,errorMsgVisibile:!1}},created:function(){this.getNotebooks()},computed:Object(D.e)(["notebooks"]),methods:T()({},Object(D.b)(["getNotebooks","addNotebook","updateNotebook","deleteNotebook"]),{add:function(){var t=this;if(""===this.form.title.trim())return this.form.errorMsg="笔记本名不能为空",void(this.errorMsgVisibile=!0);this.addNotebook({title:this.form.title}).then(function(){p.a.success("创建成功"),t.dialogCreateVisible=!1})},update:function(){var t=this;if(""===this.form.title.trim())return this.form.errorMsg="笔记本名不能为空",void(this.errorMsgVisibile=!0);this.updateNotebook({notebookId:this.form.id,title:this.form.title}).then(function(){t.dialogEditVisible=!1}).catch(function(e){t.dialogEditVisible=!1})},deleteBook:function(){var t=this;this.deleteNotebook({notebookId:this.form.id}).then(function(){p.a.success("删除成功"),t.dialogDeleteVisible=!1}).catch(function(e){t.dialogDeleteVisible=!1})},onCreate:function(){this.form.title="",this.form.id="",this.errorMsgVisibile=!1,this.dialogCreateVisible=!0},onEdit:function(t){this.form.title=t.title,this.form.id=t.id,this.dialogEditVisible=!0},onDelete:function(t){this.form.id=t.id,this.dialogDeleteVisible=!0}})},_t=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"notebook-list"}},[o("header",[o("a",{staticClass:"btn",attrs:{href:"#"},on:{click:t.onCreate}},[o("i",{staticClass:"iconfont icon-plus"}),t._v(" 新建笔记本")]),t._v(" "),o("el-dialog",{attrs:{title:"新建笔记",visible:t.dialogCreateVisible},on:{"update:visible":function(e){t.dialogCreateVisible=e}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],attrs:{placeholder:"笔记本名"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:t.errorMsgVisibile,expression:"errorMsgVisibile"}],staticClass:"error-msg"},[t._v(t._s(t.form.errorMsg))]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("a",{staticClass:"btn",on:{click:function(e){t.dialogCreateVisible=!1}}},[t._v("取消")]),t._v(" "),o("a",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.add}},[t._v("创建")])])])],1),t._v(" "),o("main",[o("div",{staticClass:"layout"},[o("h3",[t._v("笔记本列表("+t._s(t.notebooks.length)+")")]),t._v(" "),o("el-dialog",{attrs:{title:"修改笔记",visible:t.dialogEditVisible},on:{"update:visible":function(e){t.dialogEditVisible=e}}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],attrs:{placeholder:"笔记本名"},domProps:{value:t.form.title},on:{input:function(e){e.target.composing||t.$set(t.form,"title",e.target.value)}}}),t._v(" "),o("p",{directives:[{name:"show",rawName:"v-show",value:t.errorMsgVisibile,expression:"errorMsgVisibile"}],staticClass:"error-msg"},[t._v(t._s(t.form.errorMsg))]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("a",{staticClass:"btn",on:{click:function(e){t.dialogEditVisible=!1}}},[t._v("取消")]),t._v(" "),o("a",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.update}},[t._v("确定")])])]),t._v(" "),o("el-dialog",{attrs:{title:"删除笔记",visible:t.dialogDeleteVisible},on:{"update:visible":function(e){t.dialogDeleteVisible=e}}},[o("p",[t._v(" 确认要删除笔记本吗")]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("a",{staticClass:"btn",on:{click:function(e){t.dialogDeleteVisible=!1}}},[t._v("取消")]),t._v(" "),o("a",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.deleteBook}},[t._v("确定")])])]),t._v(" "),o("div",{staticClass:"book-list"},t._l(t.notebooks,function(e){return o("router-link",{staticClass:"notebook",attrs:{to:"/notebook/"+e.id}},[o("div",[o("span",{staticClass:"iconfont icon-notebook"}),t._v(" "+t._s(e.title)+" "),o("span",[t._v(t._s(e.noteCounts))]),o("span",{staticClass:"action",on:{click:function(o){o.stopPropagation(),o.preventDefault(),t.onEdit(e)}}},[t._v("编辑")]),t._v(" "),o("span",{staticClass:"action",on:{click:function(o){o.stopPropagation(),o.preventDefault(),t.onDelete(e)}}},[t._v("删除")]),t._v(" "),o("span",{staticClass:"date"},[t._v(t._s(e.updatedAtFriendly))])])])}))],1)])])},Nt=[],wt={render:_t,staticRenderFns:Nt},Ct=wt,It=o("VU/8"),Et=c,Tt=It(kt,Ct,!1,Et,null,null),Dt=Tt.exports,Vt={computed:T()({},Object(D.e)(["notebooks","notes","curNotebook","curNote"])),methods:T()({},Object(D.b)(["addNote"]),Object(D.d)(["setCurrentBook"]),{handleCommand:function(t){this.setCurrentBook({notebookId:t}),this.$router.replace({path:"/notebook/"+this.curNotebook.id+"/"})},onAddNote:function(){var t=this;this.addNote({title:"",content:"",notebookId:this.curNotebook.id}).then(function(){t.$router.push({path:"/notebook/"+t.curNotebook.id+"/note/"+t.curNote.id}),p.a.success("创建笔记成功")}).catch(function(t){p.a.error("创建笔记失败")})}})},At=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"note-sidebar"},[o("span",{staticClass:"btn add-note",on:{click:t.onAddNote}},[t._v("添加笔记")]),t._v(" "),o("el-dropdown",{staticClass:"notebook-title",attrs:{placement:"bottom"},on:{command:t.handleCommand}},[o("span",{staticClass:"el-dropdown-link"},[t._v("\n      "+t._s(t.curNotebook.title)+" "),o("i",{staticClass:"iconfont icon-down"})]),t._v(" "),o("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.notebooks,function(e){return o("el-dropdown-item",{attrs:{command:e.id}},[t._v(t._s(e.title))])}))],1),t._v(" "),t._m(0,!1,!1),t._v(" "),o("ul",{staticClass:"notes"},t._l(t.notes,function(e){return o("li",[o("router-link",{attrs:{to:"/notebook/"+t.curNotebook.id+"/note/"+e.id}},[o("span",{staticClass:"date"},[t._v(t._s(e.updatedAtFriendly))]),t._v(" "),o("span",{staticClass:"title"},[t._v(t._s(e.title))])])],1)}))],1)},$t=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"menu"},[o("div",[t._v("更新时间")]),t._v(" "),o("div",[t._v("标题")])])}],yt={render:At,staticRenderFns:$t},Rt=yt,Ut=o("VU/8"),xt=l,Lt=Ut(Vt,Rt,!1,xt,null,null),Pt=Lt.exports,Ft={components:{NoteSidebar:Pt},computed:T()({},Object(D.e)(["notebooks","curNotebook","curNote","isCurNotebookInit"])),methods:T()({},Object(D.b)(["getNotebooks","getNotes"]),Object(D.d)(["setCurrentBook","setCurrentNote"])),created:function(){var t=this,e=this.$route.params.notebookId,o=this.$route.params.noteId;console.log("created..."),this.getNotebooks().then(function(){var o=e?{notebookId:e}:t.curNotebook.id?{notebookId:t.curNotebook.id}:{};return t.setCurrentBook(o),t.getNotes({notebookId:t.curNotebook.id})}).then(function(){t.setCurrentNote(o?{noteId:o}:{})}).then(function(){var n="/notebook/"+t.curNotebook.id;t.curNote.id&&(n+="/note/"+t.curNote.id),e&&o||(t.$router.replace({path:n}),console.log("jump"))})},beforeRouteUpdate:function(t,e,o){var n=this;console.log("beforeRouteUpdate..."),console.log(t,e);var i=t.params.notebookId,s=t.params.noteId;this.setCurrentBook(i?{notebookId:i}:{}),this.getNotes({notebookId:this.curNotebook.id}).then(function(){if(n.setCurrentNote(s?{noteId:s}:{}),!s&&n.curNote.id){var t="/notebook/"+n.curNotebook.id+"/note/"+n.curNote.id;n.$router.replace({path:t})}o()})}},Ot=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"note"}},[o("note-sidebar"),t._v(" "),o("router-view")],1)},Mt=[],jt={render:Ot,staticRenderFns:Mt},St=jt,Gt=o("VU/8"),Bt=u,qt=Gt(Ft,St,!1,Bt,"data-v-72d43d06",null),Ht=qt.exports,Wt=function(){var t=this,e=t.$createElement;return(t._self._c||e)("p")},zt=[],Jt={render:Wt,staticRenderFns:zt},Xt=Jt,Yt=o("VU/8"),Zt=Yt(null,Xt,!1,null,null,null),Kt=Zt.exports,Qt=o("EFqf"),te=o.n(Qt),ee=o("M4fF"),oe=o.n(ee),ne={data:function(){return{content:"",title:"",stateText:"",isPreview:!1,dialogDeleteVisible:!1}},created:function(){this.content=this.curNote.content,this.title=this.curNote.title},computed:T()({},Object(D.e)(["curNote"]),{compiledMarkdown:function(){return te()(this.content,{sanitize:!0})}}),watch:{curNote:function(t){this.content=t.content,this.title=t.title}},methods:T()({},Object(D.b)(["updateNote","deleteNote"]),{updateContent:oe.a.debounce(function(t){var e=this;this.content=t.target.value,this.updateNote({noteId:this.curNote.id,content:t.target.value}).then(function(){e.stateText="已保存"})},300),updateTitle:oe.a.debounce(function(t){var e=this;this.title=t.target.value,this.curNote.title=t.target.value,this.updateNote({noteId:this.curNote.id,title:t.target.value}).then(function(){e.stateText="已保存"})},300),onDelete:function(){var t=this;this.deleteNote({noteId:this.curNote.id}).then(function(){p.a.success("删除成功"),t.dialogDeleteVisible=!1}).catch(function(e){p.a.error(e.message),t.dialogDeleteVisible=!1})}})},ie=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"note-detail"},[o("div",{staticClass:"note-bar"},[o("span",[t._v(" 创建日期: "+t._s(t.curNote.createdAtFriendly))]),t._v(" "),o("span",[t._v(" 更新日期: "+t._s(t.curNote.updatedAtFriendly))]),t._v(" "),o("span",[t._v(" "+t._s(t.stateText))]),t._v(" "),o("span",{staticClass:"iconfont icon-delete",on:{click:function(e){t.dialogDeleteVisible=!0}}}),t._v(" "),o("span",{staticClass:"iconfont icon-fullscreen",on:{click:function(e){t.isPreview=!t.isPreview}}}),t._v(" "),o("el-dialog",{attrs:{title:"删除笔记",visible:t.dialogDeleteVisible},on:{"update:visible":function(e){t.dialogDeleteVisible=e}}},[o("p",[t._v("确定删除笔记?")]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("a",{staticClass:"btn",on:{click:function(e){t.dialogDeleteVisible=!1}}},[t._v("取消")]),t._v(" "),o("a",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.onDelete}},[t._v("确定")])])])],1),t._v(" "),o("div",{staticClass:"note-title"},[o("input",{attrs:{type:"text",placeholder:"输入标题"},domProps:{value:t.title},on:{input:t.updateTitle}})]),t._v(" "),o("div",{staticClass:"editor"},[o("textarea",{directives:[{name:"show",rawName:"v-show",value:!t.isPreview,expression:"!isPreview"}],attrs:{placeholder:" 输入内容"},domProps:{value:t.content},on:{input:t.updateContent}}),t._v(" "),o("div",{directives:[{name:"show",rawName:"v-show",value:t.isPreview,expression:"isPreview"}],staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.compiledMarkdown)}})])])},se=[],re={render:ie,staticRenderFns:se},ae=re,ce=o("VU/8"),le=d,ue=ce(ne,ae,!1,le,null,null),de=ue.exports,fe={data:function(){return{note:{title:"",content:""},belongTo:"",dialogDeleteVisible:!1}},computed:T()({},Object(D.e)(["notebooks","trashNotes"]),{compiledMarkdown:function(){return te()(this.note.content,{sanitize:!0})}}),watch:{note:function(t){console.log("note change...");var e=this.notebooks.find(function(e){return e.id==t.notebookId});e&&(this.belongTo=e.title)}},methods:T()({},Object(D.b)(["getTrashNotes","deleteTrashNote","revertTrashNote"]),{onDelete:function(){var t=this;this.deleteTrashNote({noteId:this.note.id}).then(function(){p.a.success("已删除"),0===t.trashNotes.length?t.$router.replace("/trash"):(t.note=t.trashNotes[0],t.$router.replace("/trash/"+t.note.id)),t.dialogDeleteVisible=!1})},onRevert:function(){this.revertTrashNote({note:this.note}).then(function(){p.a.success("已恢复到笔记本")})}}),created:function(){var t=this;this.getTrashNotes().then(function(){t.$route.params.noteId?t.note=t.trashNotes.find(function(e){return e.id==t.$route.params.noteId}):t.trashNotes.length>0&&(t.note=t.trashNotes[0],t.$router.replace("/trash/"+t.note.id))}),console.log("created")},beforeRouteUpdate:function(t,e,o){this.note=this.trashNotes.find(function(e){return e.id==t.params.noteId}),o()}},ve=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"detail",attrs:{id:"trash"}},[o("div",{staticClass:"note-sidebar"},[o("h3",{staticClass:"notebook-title"},[t._v("回收站")]),t._v(" "),t._m(0,!1,!1),t._v(" "),o("ul",{staticClass:"notes"},t._l(t.trashNotes,function(e){return o("li",[o("router-link",{attrs:{to:"/trash/"+e.id}},[o("span",{staticClass:"date"},[t._v(t._s(e.updatedAtFriendly))]),t._v(" "),o("span",{staticClass:"title"},[t._v(t._s(e.title))])])],1)}))]),t._v(" "),o("div",{staticClass:"note-detail"},[t.note?o("div",{staticClass:"note-bar"},[o("span",[t._v(" 创建日期: "+t._s(t.note.createdAtFriendly))]),t._v(" "),o("span",[t._v(" | ")]),t._v(" "),o("span",[t._v(" 更新日期: "+t._s(t.note.updatedAtFriendly))]),t._v(" "),o("span",[t._v(" | ")]),t._v(" "),o("span",[t._v(" 所属笔记本: "+t._s(t.belongTo))]),t._v(" "),o("a",{staticClass:"btn action",on:{click:t.onRevert}},[t._v("恢复")]),t._v(" "),o("a",{staticClass:"btn action",on:{click:function(e){t.dialogDeleteVisible=!0}}},[t._v("彻底删除")]),t._v(" "),o("el-dialog",{attrs:{title:"删除笔记",visible:t.dialogDeleteVisible},on:{"update:visible":function(e){t.dialogDeleteVisible=e}}},[o("p",[t._v("彻底删除笔记后将无法回复")]),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("a",{staticClass:"btn",on:{click:function(e){t.dialogDeleteVisible=!1}}},[t._v("取消")]),t._v(" "),o("a",{staticClass:"btn",attrs:{type:"primary"},on:{click:t.onDelete}},[t._v("确定")])])])],1):t._e(),t._v(" "),o("div",{staticClass:"note-title"},[o("span",[t._v(t._s(t.note.title))])]),t._v(" "),o("div",{staticClass:"editor"},[o("div",{staticClass:"preview markdown-body",domProps:{innerHTML:t._s(t.compiledMarkdown)}})])])])},he=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"menu"},[o("div",[t._v("更新时间 "),o("i",{staticClass:"iconfont icon-down"})]),t._v(" "),o("div",[t._v("标题 ")])])}],pe={render:ve,staticRenderFns:he},be=pe,ge=o("VU/8"),me=f,ke=ge(fe,be,!1,me,null,null),_e=ke.exports,Ne={data:function(){return{isShowLogin:!0,isShowRegister:!1,login:{username:"",password:"",notice:"输入用户名和密码",isError:!1},register:{username:"",password:"",notice:"创建账号后，请记住用户名和密码",isError:!1}}},methods:T()({},Object(D.d)(["setUser","unsetUser"]),{showLogin:function(){this.isShowLogin=!0,this.isShowRegister=!1},showRegister:function(){this.isShowLogin=!1,this.isShowRegister=!0},onRegister:function(){var t=this;return/^[\w\u4e00-\u9fa5]{3,15}$/.test(this.register.username)?/^.{6,16}$/.test(this.register.password)?(this.register.isError=!1,this.register.notice="",void q.register({username:this.register.username,password:this.register.password}).then(function(e){console.log(e),t.setUser({user:e}),t.$router.push("/notebooks")}).catch(function(e){t.register.isError=!0,t.register.notice=e.msg})):(this.register.isError=!0,void(this.register.notice="密码长度为6~16个字符")):(this.register.isError=!0,void(this.register.notice="用户名3~15个字符，仅限于字母数字下划线中文"))},onLogin:function(){var t=this;return/^[\w\u4e00-\u9fa5]{3,15}$/.test(this.login.username)?/^.{6,16}$/.test(this.login.password)?(this.login.isError=!1,this.login.notice="",void q.login({username:this.login.username,password:this.login.password}).then(function(e){console.log(e),t.setUser({user:e}),t.$router.push("/notebooks")}).catch(function(e){t.login.isError=!0,t.login.notice=e.msg})):(this.login.isError=!0,void(this.login.notice="密码长度为6~16个字符")):(this.login.isError=!0,void(this.login.notice="用户名3~15个字符，仅限于字母数字下划线中文"))}})},we=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"login"}},[o("transition",{attrs:{name:"modal"}},[o("div",{staticClass:"modal-mask"},[o("div",{staticClass:"modal-wrapper"},[o("div",{staticClass:"modal-container"},[o("div",{staticClass:"main"}),t._v(" "),o("div",{staticClass:"form"},[o("h3",{on:{click:t.showRegister}},[t._v("创建账户")]),t._v(" "),o("transition",{attrs:{name:"slide"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowRegister,expression:"isShowRegister"}],staticClass:"register"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.username,expression:"register.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.register.username},on:{input:function(e){e.target.composing||t.$set(t.register,"username",e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.register.password,expression:"register.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.register.password},on:{input:function(e){e.target.composing||t.$set(t.register,"password",e.target.value)}}}),t._v(" "),o("p",{class:{error:t.register.isError}},[t._v(" "+t._s(t.register.notice))]),t._v(" "),o("div",{staticClass:"button",on:{click:t.onRegister}},[t._v("创建账号")])])]),t._v(" "),o("h3",{on:{click:t.showLogin}},[t._v("登录")]),t._v(" "),o("transition",{attrs:{name:"slide"}},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowLogin,expression:"isShowLogin"}],staticClass:"login"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.username,expression:"login.username"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:t.login.username},on:{input:function(e){e.target.composing||t.$set(t.login,"username",e.target.value)}}}),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.login.password,expression:"login.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.login.password},on:{input:function(e){e.target.composing||t.$set(t.login,"password",e.target.value)}}}),t._v(" "),o("p",{class:{error:t.login.isError}},[t._v(" "+t._s(t.login.notice))]),t._v(" "),o("div",{staticClass:"button",on:{click:t.onLogin}},[t._v(" 登录")])])])],1)])])])])],1)},Ce=[],Ie={render:we,staticRenderFns:Ce},Ee=Ie,Te=o("VU/8"),De=v,Ve=Te(Ne,Ee,!1,De,null,null),Ae=Ve.exports;I.default.use(mt.a);var $e=new mt.a({routes:[{path:"/login",component:Ae},{path:"/notebooks",alias:"/",component:Dt},{path:"/notebook",component:Ht},{path:"/notebook/:notebookId",component:Ht,children:[{path:"",component:Kt},{path:"note/:noteId",component:de}]},{path:"/trash/:noteId",component:_e},{path:"/trash",component:_e}]});I.default.use(C.a),I.default.use(N.a),I.default.use(k.a),I.default.use(g.a),I.default.config.productionTip=!1,I.default.prototype.$message=p.a;e.default=new I.default({el:"#app",router:$e,store:gt,template:"<App/>",components:{App:ct}})},P4yj:function(t,e){},R0aq:function(t,e){},"U/ZW":function(t,e){},Yq4J:function(t,e){},aMFU:function(t,e){},cwe7:function(t,e){},e8T8:function(t,e){},"pR7/":function(t,e){t.exports={host:""}},wsAX:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.c36d80d1e1784655bc92.js.map